{
  "version": 3,
  "sources": ["..\\src\\index.bundle.ts", "..\\src\\lib\\ericchase\\Utility\\Console.ts", "..\\src\\lib\\ericchase\\Web API\\Node_Utility.ts", "..\\src\\server\\server.ts"],
  "sourcesContent": [
    "import { DatabaseDriver } from './database-drivers/dbdriver.module.js';\nimport { ConsoleError } from './lib/ericchase/Utility/Console.js';\nimport { NodeRef } from './lib/ericchase/Web API/Node_Utility.js';\nimport { EnableHotReload, server_http } from './server/server.js';\n\nEnableHotReload();\n\n//                                                                          \\\\\n//\n// Postgres Queries\n\nconst db_query = DatabaseDriver.getLocalhost(server_http);\n\nasync function DatabaseConnected(): Promise<boolean> {\n  const q = 'SELECT 1';\n  await db_query(q, []);\n  return true;\n}\n\nasync function CreateTable(name: string): Promise<void> {\n  const q = `\n      CREATE TABLE ${name} (\n        id SERIAL PRIMARY KEY,\n        name TEXT NOT NULL,\n        email TEXT NOT NULL\n      );\n    `;\n  await db_query(q, []);\n}\nasync function TableExists(name: string): Promise<boolean> {\n  const q = `\n    SELECT EXISTS (\n      SELECT 1 \n      FROM information_schema.tables \n      WHERE table_schema = 'public' \n      AND table_name = $1\n    );\n  `;\n  const { exists } = (await db_query(q, [name]))[0];\n  return exists ?? false;\n}\n\n//                                                                          \\\\\n//\n// Database Functions\n\nasync function EnsureTableExists(name: string): Promise<{ created: boolean; exists: boolean }> {\n  try {\n    if ((await TableExists(name)) === true) {\n      return { created: false, exists: true };\n    }\n    await CreateTable(name);\n    if ((await TableExists(name)) === true) {\n      return { created: true, exists: true };\n    }\n  } catch (error) {\n    ConsoleError(error);\n  }\n  return { created: false, exists: false };\n}\n\n//                                                                          \\\\\n\nclass Page {\n  divMessages: HTMLDivElement;\n  constructor() {\n    this.divMessages = NodeRef(document.querySelector('#messages')).as(HTMLDivElement);\n  }\n  addMessage(text: string) {\n    try {\n      const div = document.createElement('div');\n      const pre = document.createElement('pre');\n      pre.textContent = text;\n      div.appendChild(pre);\n      this.divMessages.prepend(div);\n      // scroll div into view\n      div.scrollIntoView(false);\n      return div;\n    } catch (error) {\n      ConsoleError(error);\n    }\n  }\n}\n\nconst page = new Page();\n\ntry {\n  if (await DatabaseConnected()) {\n    const tableName = 'test';\n    const { created, exists } = await EnsureTableExists(tableName);\n    if (created) {\n      page.addMessage('Table created.');\n    } else if (exists) {\n      page.addMessage('Table exists.');\n    } else {\n      page.addMessage('Table creation failed.');\n    }\n  }\n} catch (error: any) {\n  page.addMessage(error);\n  page.addMessage('Is server running? Check api endpoint.');\n}\n",
    "export function ConsoleLog(...items: any[]) {\n  // biome-ignore lint: this let's us search for undesired `console.log`\n  console['log'](...items);\n}\nexport function ConsoleError(...items: any[]) {\n  // biome-ignore lint: this let's us search for undesired `console.error`\n  console['error'](...items);\n}\n",
    "export class CNodeRef {\n  node: Node;\n\n  constructor(node?: Node | null) {\n    if (node === null) {\n      throw new ReferenceError('Reference is null.');\n    }\n    if (node === undefined) {\n      throw new ReferenceError('Reference is undefined.');\n    }\n    this.node = node;\n  }\n\n  as<T extends abstract new (...args: any) => any>(constructor_ref: T): InstanceType<T> {\n    if (this.node instanceof constructor_ref) return this.node as InstanceType<T>;\n    throw new TypeError(`Reference node is not ${constructor_ref}`);\n  }\n  is<T extends abstract new (...args: any) => any>(constructor_ref: T): boolean {\n    return this.node instanceof constructor_ref;\n  }\n  passAs<T extends abstract new (...args: any) => any>(constructor_ref: T, fn: (reference: InstanceType<T>) => void): void {\n    if (this.node instanceof constructor_ref) {\n      fn(this.node as InstanceType<T>);\n    }\n  }\n  tryAs<T extends abstract new (...args: any) => any>(constructor_ref: T): InstanceType<T> | undefined {\n    if (this.node instanceof constructor_ref) {\n      return this.node as InstanceType<T>;\n    }\n  }\n\n  get classList() {\n    return this.as(HTMLElement).classList;\n  }\n  get className() {\n    return this.as(HTMLElement).className;\n  }\n  get style() {\n    return this.as(HTMLElement).style;\n  }\n\n  getAttribute(qualifiedName: string): string | null {\n    return this.as(HTMLElement).getAttribute(qualifiedName);\n  }\n  setAttribute(qualifiedName: string, value: string): void {\n    this.as(HTMLElement).setAttribute(qualifiedName, value);\n  }\n  getStyleProperty(property: string): string {\n    return this.as(HTMLElement).style.getPropertyValue(property);\n  }\n  setStyleProperty(property: string, value: string | null, priority?: string): void {\n    this.as(HTMLElement).style.setProperty(property, value, priority);\n  }\n}\nexport function NodeRef(node?: Node | null): CNodeRef {\n  return new CNodeRef(node);\n}\n\nexport class CNodeListRef extends Array<CNodeRef> {\n  constructor(nodes?: NodeList | Node[] | null) {\n    if (nodes === null) {\n      throw new ReferenceError('Reference list is null.');\n    }\n    if (nodes === undefined) {\n      throw new ReferenceError('Reference list is undefined.');\n    }\n    super();\n    for (const node of Array.from(nodes)) {\n      try {\n        this.push(new CNodeRef(node));\n      } catch (_) {}\n    }\n  }\n\n  as<T extends abstract new (...args: any) => any>(constructor_ref: T): Array<InstanceType<T>> {\n    return this.filter((ref) => ref.is(constructor_ref)).map((ref) => ref.as(constructor_ref));\n  }\n\n  passEachAs<T extends abstract new (...args: any) => any>(constructor_ref: T, fn: (reference: InstanceType<T>) => void): void {\n    for (const ref of this) {\n      ref.passAs(constructor_ref, fn);\n    }\n  }\n}\nexport function NodeListRef(nodes?: NodeList | Node[] | null): CNodeListRef {\n  return new CNodeListRef(nodes);\n}\n",
    "const host = '127.0.0.1';\nconst port = '8000';\n\nexport const server_ws = `ws://${host}:${port}`;\nexport const server_http = `http://${host}:${port}`;\n\n//                                                                          \\\\\n//\n// Hot Reload\n\nexport function EnableHotReload() {\n  const socket = new WebSocket(server_ws);\n  socket.addEventListener('message', (event) => {\n    if (event.data === 'reload') {\n      window.location.reload();\n    }\n  });\n}\n"
  ],
  "mappings": "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",
  "debugId": "2DF844628A24AE1264756E2164756E21",
  "names": []
}